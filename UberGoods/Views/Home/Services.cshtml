@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewBag.Title = "Services";
}
<h2>@ViewBag.Title</h2>

<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8" />
   <title>Find a route using Geolocation and Google Maps API</title>
   <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
   <script>
     function calculateRoute(from, to) {
       // Center initialized to Naples, Italy
       var myOptions = {
         zoom: 10,
         center: new google.maps.LatLng(40.84, 14.25),
         mapTypeId: google.maps.MapTypeId.ROADMAP
       };
       // Draw the map
       var mapObject = new google.maps.Map(document.getElementById("map"), myOptions);

       var directionsService = new google.maps.DirectionsService();
       var directionsRequest = {
         origin: from,
         destination: to,
         travelMode: google.maps.DirectionsTravelMode.DRIVING,
         unitSystem: google.maps.UnitSystem.METRIC
       };
       directionsService.route(
         directionsRequest,
         function(response, status)
         {
           if (status == google.maps.DirectionsStatus.OK)
           {
             new google.maps.DirectionsRenderer({
               map: mapObject,
               directions: response
             });
           }
           else
             $("#error").append("Unable to retrieve your route<br />");
         }
       );
     }

     $(document).ready(function() {
       // If the browser supports the Geolocation API
       if (typeof navigator.geolocation == "undefined") {
         $("#error").text("Your browser doesn't support the Geolocation API");
         return;
       }

       $("#from-link, #to-link").click(function(event) {
         event.preventDefault();
         var addressId = this.id.substring(0, this.id.indexOf("-"));

         navigator.geolocation.getCurrentPosition(function(position) {
           var geocoder = new google.maps.Geocoder();
           geocoder.geocode({
             "location": new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
           },
           function(results, status) {
             if (status == google.maps.GeocoderStatus.OK)
               $("#" + addressId).val(results[0].formatted_address);
             else
               $("#error").append("Unable to retrieve your address<br />");
           });
         },
         function(positionError){
           $("#error").append("Error: " + positionError.message + "<br />");
         },
         {
           enableHighAccuracy: true,
           timeout: 10 * 1000 // 10 seconds
         });
       });

       $("#calculate-route").submit(function(event) {
         event.preventDefault();
         calculateRoute($("#from").val(), $("#to").val());
       });
     });
   </script>
   <style type="text/css">
       #map {
           width: 500px;
           height: 400px;
           margin-top: 10px;
       }
   </style>
</head>
<body>
   <h1>Calculate Route For Driver</h1>
   <form id="calculate-route" name="calculate-route" action="#" method="get">
       <label for="from">From:</label>
       <input type="text" id="from" name="from" required="required" placeholder="Store Location" size="30" />
       <a id="from-link" href="#">Get my position</a>
       <br />

       <label for="to">To:</label>
       <input type="text" id="to" name="to" required="required" placeholder="Delivery Location" size="30" />
       <a id="to-link" href="#">Get my position</a>
       <br />

       <input type="submit" />
       <input type="reset" />
   </form>
   <div id="map"></div>
   <p id="error"></p>
</body>
</html>



@*<head>
    <title>eBay Search Results</title>
    <style type="text/css">
        body {
            font-family: arial,sans-serif;
        }
    </style>
</head>*@


@*<body>

    <h1>eBay Search Results</h1>
    <div id="results"></div>
   
    <script>

        function GetSearchURL(){
           var searchURL = "http://svcs.ebay.com/services/search/FindingService/v1?SECURITY-APPNAME=HuyNgo-UberDeli-PRD-b2f80aceb-c5c69cfb&OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&RESPONSE-DATA-FORMAT=JSON&callback=getUserSearch&REST-PAYLOAD&keywords=" + document.getElementById("textBox").value + "%203g&paginationInput.entriesPerPage=4";
            
            return searchURL;
        }
        function getUserSearch()
        {
            $.ajax({
                method: "GET",
                url: GetSearchURL(),
                dataType: "JSON",
                success: function (item) {
                    console.log(item);
                    for (var i = 0; i < items.length; ++i) {
                        var item = items[i];
                        var title = item.title;
                        var pic = item.galleryURL;
                        var viewitem = item.viewItemURL;

                        if (null != title && null != viewitem) {
                            html.push('<tr><td>' + '<img src="' + pic + '" border="0">' + '</td>' +
                              '<td><a href="' + viewitem + '" target="_blank">' + title + '</a></td></tr>');
                        }

                    }
                },
                error: function (request, status, error) {
                    alert(request.responseText);
                }
            });
        }

function cb_findItemsByKeywords(root)
{
    console.log(root);
  var items = root.findItemsByKeywordsResponse[0].searchResult[0].item || [];
  var html = [];
  html.push('<table width="100%" border="0" cellspacing="0" cellpadding="3"><tbody>');

  for (var i = 0; i < items.length; ++i)
  {
    var item     = items[i];
    var title    = item.title;
    var pic      = item.galleryURL;
    var viewitem = item.viewItemURL;

    if (null != title && null != viewitem)
    {
      html.push('<tr><td>' + '<img src="' + pic + '" border="0">' + '</td>' +
        '<td><a href="' + viewitem + '" target="_blank">' + title + '</a></td></tr>');
    }
  }
  html.push('</tbody></table>');
  document.getElementById("results").innerHTML = html.join("");

}

    </script>


   <script src="http://svcs.ebay.com/services/search/FindingService/v1?SECURITY-APPNAME=HuyNgo-UberDeli-PRD-b2f80aceb-c5c69cfb&OPERATION-NAME=findItemsByKeywords&SERVICE-VERSION=1.0.0&RESPONSE-DATA-FORMAT=JSON&callback=cb_findItemsByKeywords&REST-PAYLOAD&keywords=gameboy%203g&paginationInput.entriesPerPage=4">
    </script>

    <div id="map"></div>
    <script>
        var map;
        var people = @Html.Raw(Json.Encode(Model));
        function initMap() {

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 4,
                center: { lat: 50.5, lng: 5.00 }
            });
        }
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBKAVkFZHPnYnVA3w7z1WOs3wj-3Kg5R7c&callback=initMap"
            async defer></script>

</body>*@
